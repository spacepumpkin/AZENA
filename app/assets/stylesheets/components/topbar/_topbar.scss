#topbar {
  display               : flex;
  // width              : 100%;
  // max-width          : 100%;
  justify-content       : space-between;
  // flex: 0 1 auto;
  height                : $header-height;
  // keep position fixed; also need to adjust main content margin-top
  position              : sticky;
  top                   : 0;
  // left: 0;
  background-color      : white;
  // padding-top     : 20px;
  padding-top           : $main-padding-top;
  padding-bottom        : 20px;
  padding-right         : 50px;
  border-bottom         : 1px solid $lighter-gray;
  box-shadow            : 5px 0 $gray;
}

// MainHeader (Workspace, Project, etc.)

#topbar-main-header {
  display          : flex;
  align-items      : center;
  // width         : 50%;
  z-index          : 1;
  // border     : 1px dotted purple;

  .sidebar-menu-button {
    width          : 20px;
    margin-left    : 0;
    // padding-left: 0;
    padding        : 0 10px;
    position       : relative;
    left           : 0;
  }
}

.header-icon {
  width       : 50px;
  // height: 100%;
  box-sizing  : border-box;
  text-align  : center;
  padding     : 0 10px;
  margin-right: 20px;

  >span {
    vertical-align: middle;
    padding       : 20% 10px;

    display         : inline-block;
    // box-sizing: border-box;
    width           : 40px;
    height          : 40px;
    background-color: rgb(random(255), random(255), random(255));
    border-radius   : 8px;
    cursor: pointer;
    transition: all 0.3s ease 0s;

    &:hover {
      // margin-top: -4px;
      // margin-left: -4px;
      transform: translateY(-3px);
      box-shadow: 0px 2px 4px $light-gray;
    }
  }
}

// .header-title-wrapper {
// display: table;
// width: fit-content;
// }

.header-title {
  font-size     : 30px;
  vertical-align: middle;
  overflow      : hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-weight   : bold;
  padding       : 4px;
  border-radius : 5px;
  border        : 2px solid transparent;
  opacity       : 85%;
  transition    : all 0.3s ease 0s;
  // width: 100%;
  // max-width     : 350px;
  display: inline-block;
}

.title-editable {
  opacity: 60%;

  &:hover {
    opacity: 100%;
    border : 2px solid $light-gray;
  }

  &:focus {
    opacity: 100%;
    border : 2px solid $primary;
  }
}

.title-flash {
  animation: flashPrimary 0.8s linear;
}


// UserHeader

#topbar-user {
  display                 : flex;
  // justify-content      : space-between;
  // width                : 50%;
  // border            : 1px dotted purple;
  position                : relative;
  justify-content         : flex-end;

  >#logout-button {
    // background-color   : $primary;
    // padding            : 2px 4px;
    // text-align         : center;
    // float           : right;
    height        : 100%;
    width         : 150px;
    box-sizing    : border-box;
    padding       : 0 10px;
    // margin     : 0 0 0 auto;
    text-align    : center;
    white-space   : nowrap;
    font-size     : 20px;
    transition    : all 0.3s ease 0s;

    &:hover {
      color: $secondary;
    }
  }
}

#user-avatar {

  >button {
    width              : 50px;
    height             : 50px;
    box-sizing         : border-box;
    border-radius      : 50%;
    box-shadow         : 0px 0px 4px $gray;
    text-align         : center;
    // vertical-align  : middle;
    // display         : inline-block;
    margin-top         : 4px;
    color              : white;
    font-size          : 20px;
    font-weight        : bold;
    background-color   : rgb(random(255), random(255), random(255));
    opacity            : 80%;
    transition         : all 0.3s ease 0s;
    mix-blend-mode     : difference;

    &:hover {
      opacity: 100%;
      filter : hue-rotate(173deg) brightness(92%) contrast(96%);
    }
  }

  // &:hover #user-menu {
  //   display   : block;
  //   // top    : 0;
  //   transform : translateY(0);
  // }

}

.sliding-menu {
  display                     : block;
  opacity                     : 0;
  position                    : absolute;
  // top                : -10em;
  right                       : 0;
  background-color            : white;
  color                       : $surface--text;
  border-radius               : 5%;
  // transform                : translateY(-10%);
  // box-shadow      : 0 0 5px $lightest-gray;
  box-shadow                  : 0 0 25px $lighter-gray;
  border                      : 1px solid $light-gray;
  visibility                  : hidden;
  overflow                    : hidden;
  transition                  : all 0.4s ease 0s;

  // &:before {
  //   content      : "";
  //   position     : absolute;
  //   top          : -15px;
  //   right        : 14px;
  //   border-left  : 10px solid transparent;
  //   border-right : 10px solid transparent;
  //   border-top   : 10px solid $light-gray;
  //   // transform : translateY(10%);
  // }

  &.show-user-menu {
    // display: block;
    // top    : 5em;
    visibility: visible;
    opacity   : 1;
    transform : translateY(30%);
  }
}

#user-menu-arrow {
  position       : absolute;
  top            : 4.3em;
  right          : 15px;
  border-left    : 10px solid transparent;
  border-right   : 10px solid transparent;
  border-top     : 10px solid $light-gray;
  // transform   : translateY(-20%);
  visibility     : hidden;
  opacity        : 0;
  transition     : all 0.1s ease 0s;

  &.show-user-menu {
    visibility: visible;
    opacity   : 1;
    transform : translateY(20%);
  }
}

.user-menu-item {
  cursor : pointer;
  padding: 10px 15px;

  &:hover {
    color           : $spacecadet;
    background-color: $light-gray;
  }
}

// &::after {
//   content: "";
//   clear  : both;
//   display: block;
//   height : 0;
// }